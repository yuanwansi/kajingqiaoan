<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>预警管理中心 - 喀境桥安</title>
  <!-- 引入Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- 引入Font Awesome -->
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <!-- 引入Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
  <!-- Inter字体 -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <!-- Tailwind配置 -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#0F172A', // 深蓝黑色作为主色调
            secondary: '#1E293B', // 次要背景色
            accent: '#06B6D4', // 科技感青色作为强调色
            success: '#10B981',
            warning: '#F59E0B',
            danger: '#EF4444',
            info: '#3B82F6',
            dark: '#121212',
          },
          fontFamily: {
            inter: ['Inter', 'system-ui', 'sans-serif'],
            sans: ['"Noto Sans SC"', '"Source Han Sans SC"', 'sans-serif'],
          },
          boxShadow: {
            'neon': '0 0 5px rgba(6, 182, 212, 0.5), 0 0 10px rgba(6, 182, 212, 0.3)',
            'card': '0 4px 20px rgba(0, 0, 0, 0.3)',
          }
        },
      }
    }
  </script>
  
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .text-shadow {
        text-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
      .transition-bg {
        transition: background-color 0.3s ease;
      }
      .card-hover {
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }
      .card-hover:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
      }
      .glass-effect {
        background: rgba(15, 23, 42, 0.7);
        backdrop-filter: blur(8px);
        -webkit-backdrop-filter: blur(8px);
      }
      .neon-border {
        position: relative;
        border: 1px solid rgba(6, 182, 212, 0.2);
      }
      .neon-border::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        border: 1px solid rgba(6, 182, 212, 0.5);
        pointer-events: none;
        opacity: 0.5;
        box-shadow: 0 0 8px rgba(6, 182, 212, 0.2);
      }
      .grid-pattern {
        background-image: 
            linear-gradient(rgba(6, 182, 212, 0.05) 1px, transparent 1px),
            linear-gradient(90deg, rgba(6, 182, 212, 0.05) 1px, transparent 1px);
        background-size: 20px 20px;
      }
      .card-hover-effect {
        transition: all 0.3s ease;
      }
      .card-hover-effect:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
      }
      .text-shadow-glow {
        text-shadow: 0 0 10px rgba(6, 182, 212, 0.5);
      }
      .pulse-animation {
        animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
      }
      @keyframes pulse {
        0%, 100% {
          opacity: 1;
        }
        50% {
          opacity: 0.7;
        }
      }
    }
  </style>
</head>
<body class="bg-gray-900 font-sans text-white min-h-screen flex flex-col relative">
  <!-- 背景网格 -->
  <div class="fixed inset-0 grid-pattern pointer-events-none z-0"></div>
  
  <!-- 顶部导航栏 -->
  <header class="glass-effect shadow-lg z-10 border-b border-gray-800/30">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between h-16">
        <!-- 左侧Logo和标题 -->
        <div class="flex items-center">
          <div class="flex-shrink-0 flex items-center">
            <i class="fa fa-bell text-teal-400 text-2xl mr-2 glow-teal"></i>
            <span class="font-bold text-xl text-transparent bg-clip-text bg-gradient-to-r from-teal-400 to-blue-500">预警管理中心</span>
          </div>
        </div>
        
        <!-- 右侧用户信息 -->
        <div class="flex items-center">
          <div class="mr-4">
            <button id="notification-btn" class="p-2 relative hover:bg-gray-700/50 rounded-full transition-colors text-gray-300">
              <i class="fa fa-bell"></i>
              <span class="absolute top-0 right-0 h-2 w-2 rounded-full bg-danger"></span>
            </button>
          </div>
          <div class="ml-3 relative">
            <div class="flex items-center">
              <span class="mr-2 font-medium text-gray-200">系统管理员</span>
              <div class="h-8 w-8 rounded-full bg-gradient-to-r from-teal-400 to-blue-500 flex items-center justify-center mr-2 shadow-lg shadow-teal-400/20">
                <span class="text-gray-900 text-sm font-medium">管</span>
              </div>
              <button id="logout-button" class="p-2 hover:bg-gray-700/50 rounded-full transition-colors text-gray-300" title="退出登录">
                <i class="fa fa-sign-out"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- 主要内容区域 -->
  <div class="flex flex-1 overflow-hidden relative">
    <!-- 左侧菜单 -->
    <aside class="w-64 glass-effect border-r border-gray-800/30 flex-shrink-0">
      <nav class="flex-1 p-4 space-y-1">
        <a href="g-dashboard.html" class="flex items-center px-4 py-3 text-sm font-medium rounded-md text-gray-300 hover:bg-teal-400/10 transition-all neon-border hover:border-teal-400/30">
          <div class="w-6 h-6 flex items-center justify-center mr-3">
            <i class="fa fa-tachometer"></i>
          </div>
          总览仪表盘
        </a>
        <a href="alert-management.html" class="flex items-center px-4 py-3 text-sm font-medium rounded-md bg-teal-400/10 border-l-4 border-teal-400 text-teal-300">
          <div class="w-6 h-6 flex items-center justify-center mr-3">
            <i class="fa fa-bell"></i>
          </div>
          预警管理中心
        </a>
        <a href="#" class="flex items-center px-4 py-3 text-sm font-medium rounded-md text-gray-300 hover:bg-teal-400/10 transition-all neon-border hover:border-teal-400/30">
          <div class="w-6 h-6 flex items-center justify-center mr-3">
            <i class="fa fa-cogs"></i>
          </div>
          系统设置
        </a>
        <a href="#" class="flex items-center px-4 py-3 text-sm font-medium rounded-md text-gray-300 hover:bg-teal-400/10 transition-all neon-border hover:border-teal-400/30">
          <div class="w-6 h-6 flex items-center justify-center mr-3">
            <i class="fa fa-user"></i>
          </div>
          用户管理
        </a>
      </nav>
    </aside>

    <!-- 主要内容 -->
    <main class="flex-1 overflow-y-auto bg-gray-900/90 p-6 relative">
      <!-- 网格背景 -->
      <div class="absolute inset-0 grid-pattern pointer-events-none opacity-30"></div>
      
      <!-- 页面标题 -->
      <div class="mb-6">
        <h1 class="text-2xl font-bold text-white mb-2">智能预警管理</h1>
        <p class="text-gray-400">实时监控桥梁安全状态，智能预测风险趋势</p>
      </div>
      
      <!-- 预警概览卡片 -->
      <div class="mb-6 grid grid-cols-1 md:grid-cols-3 gap-4">
        <div class="glass-effect rounded-lg p-4 card-hover-effect neon-border">
          <div class="flex items-center justify-between">
            <h3 class="text-sm font-medium text-gray-400">严重预警</h3>
            <span class="text-xs bg-danger/20 text-danger px-2 py-1 rounded-full pulse-animation">需要立即处理</span>
          </div>
          <div class="mt-2">
            <span class="text-3xl font-bold text-danger">5</span>
            <span class="text-gray-500 ml-1">起</span>
          </div>
          <div class="mt-2 flex items-center text-xs text-gray-500">
            <i class="fa fa-arrow-up text-danger mr-1"></i>
            <span>较昨日增加 2 起</span>
          </div>
        </div>
        
        <div class="glass-effect rounded-lg p-4 card-hover-effect neon-border">
          <div class="flex items-center justify-between">
            <h3 class="text-sm font-medium text-gray-400">警告预警</h3>
            <span class="text-xs bg-warning/20 text-warning px-2 py-1 rounded-full">需要关注</span>
          </div>
          <div class="mt-2">
            <span class="text-3xl font-bold text-warning">12</span>
            <span class="text-gray-500 ml-1">起</span>
          </div>
          <div class="mt-2 flex items-center text-xs text-gray-500">
            <i class="fa fa-arrow-down text-success mr-1"></i>
            <span>较昨日减少 3 起</span>
          </div>
        </div>
        
        <div class="glass-effect rounded-lg p-4 card-hover-effect neon-border">
          <div class="flex items-center justify-between">
            <h3 class="text-sm font-medium text-gray-400">注意预警</h3>
            <span class="text-xs bg-info/20 text-info px-2 py-1 rounded-full">正常关注</span>
          </div>
          <div class="mt-2">
            <span class="text-3xl font-bold text-info">23</span>
            <span class="text-gray-500 ml-1">起</span>
          </div>
          <div class="mt-2 flex items-center text-xs text-gray-500">
            <i class="fa fa-minus text-gray-500 mr-1"></i>
            <span>与昨日持平</span>
          </div>
        </div>
      </div>
      
      <!-- 预警统计图表 -->
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
        <!-- 预警趋势图 -->
        <div class="glass-effect rounded-lg p-4 card-hover-effect neon-border">
          <div class="flex justify-between items-center mb-4">
            <h2 class="font-bold text-teal-400">预警趋势分析</h2>
            <div class="text-xs text-gray-400">最近30天</div>
          </div>
          <div class="h-[300px]">
            <canvas id="alertTrendChart"></canvas>
          </div>
        </div>
        
        <!-- 预警类型分布 -->
        <div class="glass-effect rounded-lg p-4 card-hover-effect neon-border">
          <div class="flex justify-between items-center mb-4">
            <h2 class="font-bold text-teal-400">预警类型分布</h2>
            <div class="text-xs text-gray-400">按严重程度</div>
          </div>
          <div class="h-[300px]">
            <canvas id="alertTypeChart"></canvas>
          </div>
        </div>
      </div>
      
      <!-- AI预警优化分析 -->
      <div class="glass-effect rounded-lg p-4 card-hover-effect neon-border mb-6">
        <div class="flex justify-between items-center mb-4">
          <h2 class="font-bold text-teal-400">AI预警准确性优化分析</h2>
          <button id="view-ai-details" class="text-xs bg-teal-400/10 hover:bg-teal-400/20 text-teal-300 border border-teal-400/30 px-3 py-1 rounded flex items-center transition-all">
            <i class="fa fa-eye mr-1"></i> 查看详情
          </button>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
          <div class="border border-gray-700 rounded-lg p-3">
            <h3 class="text-sm text-gray-400 mb-2">预警准确率</h3>
            <div class="flex items-end justify-between">
              <span class="text-2xl font-bold text-teal-400">92.7%</span>
              <span class="text-xs text-success"><i class="fa fa-arrow-up"></i> 4.3%</span>
            </div>
            <div class="mt-2 w-full bg-gray-700 rounded-full h-2">
              <div class="bg-teal-400 h-2 rounded-full" style="width: 92.7%"></div>
            </div>
          </div>
          <div class="border border-gray-700 rounded-lg p-3">
            <h3 class="text-sm text-gray-400 mb-2">误报率降低</h3>
            <div class="flex items-end justify-between">
              <span class="text-2xl font-bold text-teal-400">65.8%</span>
              <span class="text-xs text-success"><i class="fa fa-arrow-up"></i> 12.5%</span>
            </div>
            <div class="mt-2 w-full bg-gray-700 rounded-full h-2">
              <div class="bg-teal-400 h-2 rounded-full" style="width: 65.8%"></div>
            </div>
          </div>
          <div class="border border-gray-700 rounded-lg p-3">
            <h3 class="text-sm text-gray-400 mb-2">预警提前量</h3>
            <div class="flex items-end justify-between">
              <span class="text-2xl font-bold text-teal-400">48小时</span>
              <span class="text-xs text-success"><i class="fa fa-arrow-up"></i> 12小时</span>
            </div>
            <div class="mt-2 w-full bg-gray-700 rounded-full h-2">
              <div class="bg-teal-400 h-2 rounded-full" style="width: 80%"></div>
            </div>
          </div>
        </div>
        <div class="text-sm text-gray-400">
          <p>AI模型通过分析历史数据、实时监测指标和环境因素，持续优化预警算法。当前模型已学习了150座桥梁的3年运行数据，覆盖各类极端天气和交通荷载条件。</p>
        </div>
      </div>
      
      <!-- 预警处理闭环管理 -->
      <div class="glass-effect rounded-lg p-4 card-hover-effect neon-border mb-6">
        <div class="flex justify-between items-center mb-4">
          <h2 class="font-bold text-teal-400">预警处理闭环管理</h2>
          <div class="flex space-x-2">
            <select id="alert-status-filter" class="text-sm bg-gray-800/70 text-white border border-gray-700 rounded px-2 py-1 focus:outline-none focus:border-teal-400">
              <option value="all">全部状态</option>
              <option value="pending">待处理</option>
              <option value="processing">处理中</option>
              <option value="resolved">已解决</option>
              <option value="closed">已关闭</option>
            </select>
            <button id="refresh-alerts" class="text-sm bg-teal-400/10 hover:bg-teal-400/20 text-teal-300 border border-teal-400/30 px-3 py-1 rounded flex items-center transition-all">
              <i class="fa fa-refresh mr-1"></i> 刷新
            </button>
          </div>
        </div>
        
        <!-- 预警列表 -->
        <div class="overflow-x-auto">
          <table class="min-w-full divide-y divide-gray-700">
            <thead>
              <tr>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">预警ID</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">桥梁名称</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">预警类型</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">严重程度</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">发生时间</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">处理状态</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">负责人</th>
                <th class="px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">操作</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-gray-700" id="alert-list">
              <!-- 预警项将通过JavaScript动态生成 -->
            </tbody>
          </table>
        </div>
        
        <!-- 分页控制 -->
        <div class="flex justify-between items-center mt-4">
          <div class="text-xs text-gray-400">
            显示 1-10 条，共 40 条
          </div>
          <div class="flex space-x-1">
            <button class="w-8 h-8 flex items-center justify-center rounded border border-gray-700 text-gray-400 hover:bg-gray-800">
              <i class="fa fa-angle-left"></i>
            </button>
            <button class="w-8 h-8 flex items-center justify-center rounded border border-teal-400 bg-teal-400/10 text-teal-400">1</button>
            <button class="w-8 h-8 flex items-center justify-center rounded border border-gray-700 text-gray-300 hover:bg-gray-800">2</button>
            <button class="w-8 h-8 flex items-center justify-center rounded border border-gray-700 text-gray-300 hover:bg-gray-800">3</button>
            <button class="w-8 h-8 flex items-center justify-center rounded border border-gray-700 text-gray-300 hover:bg-gray-800">4</button>
            <button class="w-8 h-8 flex items-center justify-center rounded border border-gray-700 text-gray-400 hover:bg-gray-800">
              <i class="fa fa-angle-right"></i>
            </button>
          </div>
        </div>
      </div>
    </main>
  </div>
  
  <!-- 预警详情模态框 -->
  <div id="alert-detail-modal" class="fixed inset-0 z-50 hidden">
    <div class="absolute inset-0 bg-black opacity-75"></div>
    <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-3xl">
      <div class="glass-effect rounded-lg p-6 neon-border max-h-[80vh] overflow-y-auto">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-xl font-bold text-teal-400">预警详情</h3>
          <button id="close-modal" class="text-gray-400 hover:text-white">
            <i class="fa fa-times text-xl"></i>
          </button>
        </div>
        
        <!-- 预警基本信息 -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
          <div class="border border-gray-700 rounded-lg p-3">
            <h4 class="text-sm text-gray-400 mb-1">预警ID</h4>
            <p class="font-medium" id="modal-alert-id">ALERT-20251018-001</p>
          </div>
          <div class="border border-gray-700 rounded-lg p-3">
            <h4 class="text-sm text-gray-400 mb-1">桥梁名称</h4>
            <p class="font-medium" id="modal-bridge-name">贵黄高速2号桥</p>
          </div>
          <div class="border border-gray-700 rounded-lg p-3">
            <h4 class="text-sm text-gray-400 mb-1">预警类型</h4>
            <p class="font-medium" id="modal-alert-type">基础沉降异常</p>
          </div>
          <div class="border border-gray-700 rounded-lg p-3">
            <h4 class="text-sm text-gray-400 mb-1">严重程度</h4>
            <p class="font-medium" id="modal-severity"><span class="inline-block px-2 py-0.5 rounded-full bg-danger/20 text-danger text-xs">严重</span></p>
          </div>
          <div class="border border-gray-700 rounded-lg p-3">
            <h4 class="text-sm text-gray-400 mb-1">发生时间</h4>
            <p class="font-medium" id="modal-occur-time">2025-10-18 14:35:22</p>
          </div>
          <div class="border border-gray-700 rounded-lg p-3">
            <h4 class="text-sm text-gray-400 mb-1">处理状态</h4>
            <p class="font-medium" id="modal-status"><span class="inline-block px-2 py-0.5 rounded-full bg-warning/20 text-warning text-xs">处理中</span></p>
          </div>
        </div>
        
        <!-- 预警描述和建议 -->
        <div class="mb-6">
          <h4 class="text-sm font-medium text-gray-300 mb-2">预警描述</h4>
          <div class="border border-gray-700 rounded-lg p-4 bg-gray-800/50" id="modal-description">
            桥梁基础监测点B3-15沉降速率异常，24小时内沉降量达到3.8mm，超过安全阈值（3mm）。AI分析显示，该异常与最近降雨和重型车辆频繁通行有关，存在进一步恶化风险。
          </div>
        </div>
        
        <!-- 监测数据图表 -->
        <div class="mb-6">
          <h4 class="text-sm font-medium text-gray-300 mb-2">相关监测数据</h4>
          <div class="border border-gray-700 rounded-lg p-4">
            <div class="h-[200px]">
              <canvas id="modal-alert-chart"></canvas>
            </div>
          </div>
        </div>
        
        <!-- 处理记录 -->
        <div class="mb-6">
          <h4 class="text-sm font-medium text-gray-300 mb-2">处理记录</h4>
          <div class="border border-gray-700 rounded-lg p-4 space-y-3" id="modal-handle-records">
            <div class="flex">
              <div class="flex-shrink-0 mr-3">
                <div class="h-8 w-8 rounded-full bg-gray-700 flex items-center justify-center">
                  <i class="fa fa-user text-gray-400"></i>
                </div>
              </div>
              <div class="flex-1">
                <div class="text-sm font-medium text-white">系统自动分配</div>
                <div class="text-xs text-gray-400 mt-0.5">2025-10-18 14:36:00</div>
                <div class="text-sm text-gray-300 mt-1">预警已自动分配给张三工程师处理。</div>
              </div>
            </div>
            <div class="flex">
              <div class="flex-shrink-0 mr-3">
                <div class="h-8 w-8 rounded-full bg-gray-700 flex items-center justify-center">
                  <span class="text-xs font-medium">张</span>
                </div>
              </div>
              <div class="flex-1">
                <div class="text-sm font-medium text-white">张三 - 结构工程师</div>
                <div class="text-xs text-gray-400 mt-0.5">2025-10-18 14:45:00</div>
                <div class="text-sm text-gray-300 mt-1">已收到预警，正在前往现场核查。</div>
              </div>
            </div>
            <div class="flex">
              <div class="flex-shrink-0 mr-3">
                <div class="h-8 w-8 rounded-full bg-gray-700 flex items-center justify-center">
                  <span class="text-xs font-medium">张</span>
                </div>
              </div>
              <div class="flex-1">
                <div class="text-sm font-medium text-white">张三 - 结构工程师</div>
                <div class="text-xs text-gray-400 mt-0.5">2025-10-18 16:20:00</div>
                <div class="text-sm text-gray-300 mt-1">现场核查确认沉降异常，已设置临时监测点，建议限制重型车辆通行。</div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- 处理操作 -->
        <div class="border-t border-gray-700 pt-4">
          <h4 class="text-sm font-medium text-gray-300 mb-2">处理操作</h4>
          <div class="flex flex-col space-y-3">
            <select id="modal-status-update" class="bg-gray-800/70 text-white border border-gray-700 rounded px-3 py-2 focus:outline-none focus:border-teal-400">
              <option value="pending">待处理</option>
              <option value="processing" selected>处理中</option>
              <option value="resolved">已解决</option>
              <option value="closed">已关闭</option>
            </select>
            <textarea id="modal-handle-note" rows="3" class="bg-gray-800/70 text-white border border-gray-700 rounded px-3 py-2 focus:outline-none focus:border-teal-400" placeholder="请输入处理记录..."></textarea>
            <div class="flex justify-end space-x-2">
              <button id="modal-cancel" class="px-4 py-2 border border-gray-700 rounded text-gray-300 hover:bg-gray-800 transition-colors">
                取消
              </button>
              <button id="modal-submit" class="px-4 py-2 border border-teal-400 bg-teal-400/10 text-teal-400 hover:bg-teal-400/20 transition-colors">
                提交处理
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- 预警推送设置模态框 -->
  <div id="notification-settings-modal" class="fixed inset-0 z-50 hidden">
    <div class="absolute inset-0 bg-black opacity-75"></div>
    <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-full max-w-lg">
      <div class="glass-effect rounded-lg p-6 neon-border">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-xl font-bold text-teal-400">预警推送设置</h3>
          <button id="close-notification-settings" class="text-gray-400 hover:text-white">
            <i class="fa fa-times text-xl"></i>
          </button>
        </div>
        
        <div class="space-y-4">
          <div class="border border-gray-700 rounded-lg p-4">
            <h4 class="text-sm font-medium text-gray-300 mb-3">推送方式</h4>
            <div class="space-y-2">
              <label class="flex items-center">
                <input type="checkbox" class="rounded text-teal-400 focus:ring-teal-400 bg-gray-800 border-gray-700" checked>
                <span class="ml-2 text-sm text-gray-300">系统内消息通知</span>
              </label>
              <label class="flex items-center">
                <input type="checkbox" class="rounded text-teal-400 focus:ring-teal-400 bg-gray-800 border-gray-700" checked>
                <span class="ml-2 text-sm text-gray-300">短信通知（严重预警）</span>
              </label>
              <label class="flex items-center">
                <input type="checkbox" class="rounded text-teal-400 focus:ring-teal-400 bg-gray-800 border-gray-700">
                <span class="ml-2 text-sm text-gray-300">邮件通知</span>
              </label>
              <label class="flex items-center">
                <input type="checkbox" class="rounded text-teal-400 focus:ring-teal-400 bg-gray-800 border-gray-700">
                <span class="ml-2 text-sm text-gray-300">APP推送</span>
              </label>
            </div>
          </div>
          
          <div class="border border-gray-700 rounded-lg p-4">
            <h4 class="text-sm font-medium text-gray-300 mb-3">预警等级设置</h4>
            <div class="space-y-3">
              <div>
                <div class="flex justify-between text-sm mb-1">
                  <span class="text-gray-300">严重预警</span>
                  <span class="text-danger">立即推送</span>
                </div>
                <div class="flex items-center space-x-2">
                  <span class="text-xs text-gray-400">0分钟</span>
                  <input type="range" min="0" max="60" value="0" class="w-full h-1 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-danger">
                  <span class="text-xs text-gray-400">60分钟</span>
                </div>
              </div>
              <div>
                <div class="flex justify-between text-sm mb-1">
                  <span class="text-gray-300">警告预警</span>
                  <span class="text-warning">5分钟后推送</span>
                </div>
                <div class="flex items-center space-x-2">
                  <span class="text-xs text-gray-400">0分钟</span>
                  <input type="range" min="0" max="60" value="5" class="w-full h-1 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-warning">
                  <span class="text-xs text-gray-400">60分钟</span>
                </div>
              </div>
              <div>
                <div class="flex justify-between text-sm mb-1">
                  <span class="text-gray-300">注意预警</span>
                  <span class="text-info">15分钟后推送</span>
                </div>
                <div class="flex items-center space-x-2">
                  <span class="text-xs text-gray-400">0分钟</span>
                  <input type="range" min="0" max="60" value="15" class="w-full h-1 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-info">
                  <span class="text-xs text-gray-400">60分钟</span>
                </div>
              </div>
            </div>
          </div>
          
          <div class="border border-gray-700 rounded-lg p-4">
            <h4 class="text-sm font-medium text-gray-300 mb-3">推送规则</h4>
            <div class="space-y-2">
              <label class="flex items-center">
                <input type="checkbox" class="rounded text-teal-400 focus:ring-teal-400 bg-gray-800 border-gray-700" checked>
                <span class="ml-2 text-sm text-gray-300">基于地理位置的预警推送</span>
              </label>
              <label class="flex items-center">
                <input type="checkbox" class="rounded text-teal-400 focus:ring-teal-400 bg-gray-800 border-gray-700" checked>
                <span class="ml-2 text-sm text-gray-300">基于角色的预警推送</span>
              </label>
              <label class="flex items-center">
                <input type="checkbox" class="rounded text-teal-400 focus:ring-teal-400 bg-gray-800 border-gray-700">
                <span class="ml-2 text-sm text-gray-300">工作时间外推送提醒</span>
              </label>
              <label class="flex items-center">
                <input type="checkbox" class="rounded text-teal-400 focus:ring-teal-400 bg-gray-800 border-gray-700">
                <span class="ml-2 text-sm text-gray-300">预警升级自动重新推送</span>
              </label>
            </div>
          </div>
        </div>
        
        <div class="flex justify-end space-x-2 mt-6">
          <button id="cancel-notification-settings" class="px-4 py-2 border border-gray-700 rounded text-gray-300 hover:bg-gray-800 transition-colors">
            取消
          </button>
          <button id="save-notification-settings" class="px-4 py-2 border border-teal-400 bg-teal-400/10 text-teal-400 hover:bg-teal-400/20 transition-colors">
            保存设置
          </button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // 预警趋势图
    const alertTrendCtx = document.getElementById('alertTrendChart').getContext('2d');
    const alertTrendChart = new Chart(alertTrendCtx, {
      type: 'line',
      data: {
        labels: ['9/18', '9/22', '9/26', '9/30', '10/4', '10/8', '10/12', '10/16'],
        datasets: [
          {
            label: '严重预警',
            data: [3, 4, 5, 6, 4, 3, 5, 5],
            borderColor: '#EF4444',
            backgroundColor: 'rgba(239, 68, 68, 0.1)',
            tension: 0.4,
            fill: true,
            pointBackgroundColor: '#EF4444',
            pointBorderColor: '#fff',
            pointBorderWidth: 2,
            pointRadius: 4,
            pointHoverRadius: 6
          },
          {
            label: '警告预警',
            data: [8, 10, 12, 15, 13, 11, 14, 12],
            borderColor: '#F59E0B',
            backgroundColor: 'rgba(245, 158, 11, 0.1)',
            tension: 0.4,
            fill: true,
            pointBackgroundColor: '#F59E0B',
            pointBorderColor: '#fff',
            pointBorderWidth: 2,
            pointRadius: 4,
            pointHoverRadius: 6
          },
          {
            label: '注意预警',
            data: [18, 20, 22, 25, 23, 21, 24, 23],
            borderColor: '#3B82F6',
            backgroundColor: 'rgba(59, 130, 246, 0.1)',
            tension: 0.4,
            fill: true,
            pointBackgroundColor: '#3B82F6',
            pointBorderColor: '#fff',
            pointBorderWidth: 2,
            pointRadius: 4,
            pointHoverRadius: 6
          }
        ]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          tooltip: {
            mode: 'index',
            intersect: false,
            backgroundColor: 'rgba(15, 23, 42, 0.9)',
            titleColor: '#06B6D4',
            bodyColor: '#fff',
            borderColor: '#06B6D4',
            borderWidth: 1,
            padding: 12,
            boxPadding: 6,
            usePointStyle: true
          },
          legend: {
            labels: {
              color: '#E2E8F0',
              font: {
                family: 'Inter'
              }
            }
          }
        },
        scales: {
          y: {
            beginAtZero: true,
            title: {
              display: true,
              text: '预警数量',
              color: '#94A3B8'
            },
            grid: {
              color: 'rgba(148, 163, 184, 0.1)',
              borderColor: 'rgba(148, 163, 184, 0.2)'
            },
            ticks: {
              color: '#94A3B8'
            }
          },
          x: {
            grid: {
              color: 'rgba(148, 163, 184, 0.1)',
              borderColor: 'rgba(148, 163, 184, 0.2)'
            },
            ticks: {
              color: '#94A3B8'
            }
          }
        }
      }
    });

    // 预警类型分布图
    const alertTypeCtx = document.getElementById('alertTypeChart').getContext('2d');
    const alertTypeChart = new Chart(alertTypeCtx, {
      type: 'doughnut',
      data: {
        labels: ['基础沉降异常', '裂缝扩大', '溶洞风险', '振动异常', '其他'],
        datasets: [{
          data: [35, 25, 20, 15, 5],
          backgroundColor: [
            'rgba(239, 68, 68, 0.8)', // 危险
            'rgba(245, 158, 11, 0.8)', // 警告
            'rgba(59, 130, 246, 0.8)', // 注意
            'rgba(6, 182, 212, 0.8)', // 信息
            'rgba(148, 163, 184, 0.8)' // 灰色
          ],
          borderColor: '#0F172A',
          borderWidth: 2,
          hoverOffset: 10,
          hoverBorderWidth: 3
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        animation: {
          animateRotate: true,
          animateScale: true,
          duration: 2000,
          easing: 'easeOutQuart'
        },
        plugins: {
          legend: {
            position: 'right',
            labels: {
              color: 'rgba(255, 255, 255, 0.8)',
              font: {
                family: 'Inter, sans-serif',
                weight: '500',
                size: 11
              },
              padding: 15,
              usePointStyle: true,
              pointStyle: 'circle'
            }
          },
          tooltip: {
            backgroundColor: 'rgba(15, 23, 42, 0.95)',
            borderColor: '#06B6D4',
            borderWidth: 1,
            padding: 12,
            titleColor: '#FFFFFF',
            bodyColor: '#E2E8F0',
            bodyFont: {
              family: 'Inter, sans-serif'
            },
            titleFont: {
              family: 'Inter, sans-serif',
              weight: 'bold'
            },
            callbacks: {
              label: function(context) {
                const label = context.label || '';
                const value = context.raw || 0;
                const total = context.dataset.data.reduce((a, b) => a + b, 0);
                const percentage = Math.round((value / total) * 100);
                return `${label}: ${value} (${percentage}%)`;
              }
            }
          }
        },
        cutout: '60%'
      }
    });

    // 模态框预警数据图表
    const modalAlertChartCtx = document.getElementById('modal-alert-chart').getContext('2d');
    const modalAlertChart = new Chart(modalAlertChartCtx, {
      type: 'line',
      data: {
        labels: ['10/14', '10/15', '10/16', '10/17', '10/18(00:00)', '10/18(06:00)', '10/18(12:00)', '10/18(14:35)'],
        datasets: [
          {
            label: '实际沉降量(mm)',
            data: [1.2, 1.5, 1.8, 2.2, 2.5, 2.9, 3.4, 3.8],
            borderColor: '#EF4444',
            backgroundColor: 'rgba(239, 68, 68, 0.1)',
            tension: 0.4,
            fill: true,
            pointBackgroundColor: '#EF4444',
            pointBorderColor: '#fff',
            pointBorderWidth: 2,
            pointRadius: 4,
            pointHoverRadius: 6
          },
          {
            label: '安全阈值(mm)',
            data: [3, 3, 3, 3, 3, 3, 3, 3],
            borderColor: '#F59E0B',
            borderDash: [5, 5],
            tension: 0,
            pointRadius: 0,
            fill: false
          }
        ]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          tooltip: {
            mode: 'index',
            intersect: false,
            backgroundColor: 'rgba(15, 23, 42, 0.9)',
            titleColor: '#06B6D4',
            bodyColor: '#fff',
            borderColor: '#06B6D4',
            borderWidth: 1,
            padding: 12,
            boxPadding: 6,
            usePointStyle: true
          },
          legend: {
            labels: {
              color: '#E2E8F0',
              font: {
                family: 'Inter',
                size: 10
              }
            }
          }
        },
        scales: {
          y: {
            beginAtZero: true,
            title: {
              display: true,
              text: '沉降量(mm)',
              color: '#94A3B8',
              font: {
                size: 10
              }
            },
            grid: {
              color: 'rgba(148, 163, 184, 0.1)',
              borderColor: 'rgba(148, 163, 184, 0.2)'
            },
            ticks: {
              color: '#94A3B8',
              font: {
                size: 10
              }
            }
          },
          x: {
            grid: {
              color: 'rgba(148, 163, 184, 0.1)',
              borderColor: 'rgba(148, 163, 184, 0.2)'
            },
            ticks: {
              color: '#94A3B8',
              font: {
                size: 10
              },
              maxRotation: 45,
              minRotation: 45
            }
          }
        }
      }
    });

    // 模拟预警数据
    const alertData = [
      {
        id: 'ALERT-20251018-001',
        bridgeName: '贵黄高速2号桥',
        alertType: '基础沉降异常',
        severity: '严重',
        severityClass: 'bg-danger/20 text-danger',
        occurTime: '2025-10-18 14:35:22',
        status: '处理中',
        statusClass: 'bg-warning/20 text-warning',
        handler: '张三'
      },
      {
        id: 'ALERT-20251018-002',
        bridgeName: '南明河大桥',
        alertType: '裂缝扩大',
        severity: '警告',
        severityClass: 'bg-warning/20 text-warning',
        occurTime: '2025-10-18 13:20:15',
        status: '待处理',
        statusClass: 'bg-gray-500/20 text-gray-400',
        handler: '待分配'
      },
      {
        id: 'ALERT-20251018-003',
        bridgeName: '花溪大桥',
        alertType: '溶洞风险',
        severity: '注意',
        severityClass: 'bg-info/20 text-info',
        occurTime: '2025-10-18 12:10:33',
        status: '处理中',
        statusClass: 'bg-warning/20 text-warning',
        handler: '李四'
      },
      {
        id: 'ALERT-20251018-004',
        bridgeName: '观山湖大桥',
        alertType: '振动异常',
        severity: '警告',
        severityClass: 'bg-warning/20 text-warning',
        occurTime: '2025-10-18 11:45:08',
        status: '已解决',
        statusClass: 'bg-success/20 text-success',
        handler: '王五'
      },
      {
        id: 'ALERT-20251018-005',
        bridgeName: '贵黄高速2号桥',
        alertType: '基础沉降异常',
        severity: '严重',
        severityClass: 'bg-danger/20 text-danger',
        occurTime: '2025-10-18 10:30:12',
        status: '处理中',
        statusClass: 'bg-warning/20 text-warning',
        handler: '张三'
      },
      {
        id: 'ALERT-20251018-006',
        bridgeName: '南明河大桥',
        alertType: '温度异常',
        severity: '注意',
        severityClass: 'bg-info/20 text-info',
        occurTime: '2025-10-18 09:15:47',
        status: '已关闭',
        statusClass: 'bg-gray-700/20 text-gray-500',
        handler: '赵六'
      },
      {
        id: 'ALERT-20251018-007',
        bridgeName: '花溪大桥',
        alertType: '裂缝扩大',
        severity: '警告',
        severityClass: 'bg-warning/20 text-warning',
        occurTime: '2025-10-18 08:50:22',
        status: '待处理',
        statusClass: 'bg-gray-500/20 text-gray-400',
        handler: '待分配'
      },
      {
        id: 'ALERT-20251018-008',
        bridgeName: '观山湖大桥',
        alertType: '溶洞风险',
        severity: '注意',
        severityClass: 'bg-info/20 text-info',
        occurTime: '2025-10-18 07:30:55',
        status: '处理中',
        statusClass: 'bg-warning/20 text-warning',
        handler: '李四'
      },
      {
        id: 'ALERT-20251018-009',
        bridgeName: '贵黄高速2号桥',
        alertType: '振动异常',
        severity: '严重',
        severityClass: 'bg-danger/20 text-danger',
        occurTime: '2025-10-18 06:45:30',
        status: '已解决',
        statusClass: 'bg-success/20 text-success',
        handler: '王五'
      },
      {
        id: 'ALERT-20251018-010',
        bridgeName: '南明河大桥',
        alertType: '基础沉降异常',
        severity: '警告',
        severityClass: 'bg-warning/20 text-warning',
        occurTime: '2025-10-18 05:20:18',
        status: '处理中',
        statusClass: 'bg-warning/20 text-warning',
        handler: '赵六'
      }
    ];

    // 渲染预警列表
    function renderAlertList(alerts) {
      const alertListElement = document.getElementById('alert-list');
      alertListElement.innerHTML = '';
      
      alerts.forEach(alert => {
        const row = document.createElement('tr');
        row.className = 'hover:bg-gray-800/50 transition-colors';
        row.innerHTML = `
          <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-300">${alert.id}</td>
          <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-300">${alert.bridgeName}</td>
          <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-300">${alert.alertType}</td>
          <td class="px-4 py-3 whitespace-nowrap text-sm"><span class="px-2 py-1 rounded-full text-xs ${alert.severityClass}">${alert.severity}</span></td>
          <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-300">${alert.occurTime}</td>
          <td class="px-4 py-3 whitespace-nowrap text-sm"><span class="px-2 py-1 rounded-full text-xs ${alert.statusClass}">${alert.status}</span></td>
          <td class="px-4 py-3 whitespace-nowrap text-sm text-gray-300">${alert.handler}</td>
          <td class="px-4 py-3 whitespace-nowrap text-sm">
            <button class="text-teal-400 hover:text-teal-300 mr-3 view-alert" data-id="${alert.id}">
              <i class="fa fa-eye"></i>
            </button>
            <button class="text-gray-400 hover:text-gray-300 mr-3 assign-alert" data-id="${alert.id}">
              <i class="fa fa-user-plus"></i>
            </button>
            <button class="text-gray-400 hover:text-gray-300 close-alert" data-id="${alert.id}">
              <i class="fa fa-times"></i>
            </button>
          </td>
        `;
        alertListElement.appendChild(row);
      });
      
      // 添加查看详情事件监听
      document.querySelectorAll('.view-alert').forEach(button => {
        button.addEventListener('click', function() {
          const alertId = this.getAttribute('data-id');
          openAlertDetail(alertId);
        });
      });
    }

    // 打开预警详情模态框
    function openAlertDetail(alertId) {
      const alert = alertData.find(a => a.id === alertId);
      if (alert) {
        document.getElementById('modal-alert-id').textContent = alert.id;
        document.getElementById('modal-bridge-name').textContent = alert.bridgeName;
        document.getElementById('modal-alert-type').textContent = alert.alertType;
        document.getElementById('modal-severity').innerHTML = `<span class="inline-block px-2 py-0.5 rounded-full ${alert.severityClass} text-xs">${alert.severity}</span>`;
        document.getElementById('modal-occur-time').textContent = alert.occurTime;
        document.getElementById('modal-status').innerHTML = `<span class="inline-block px-2 py-0.5 rounded-full ${alert.statusClass} text-xs">${alert.status}</span>`;
      }
      
      document.getElementById('alert-detail-modal').classList.remove('hidden');
    }

    // 关闭预警详情模态框
    function closeAlertDetail() {
      document.getElementById('alert-detail-modal').classList.add('hidden');
    }

    // 打开预警推送设置模态框
    function openNotificationSettings() {
      document.getElementById('notification-settings-modal').classList.remove('hidden');
    }

    // 关闭预警推送设置模态框
    function closeNotificationSettings() {
      document.getElementById('notification-settings-modal').classList.add('hidden');
    }

    // 过滤预警列表
    function filterAlertList(status) {
      if (status === 'all') {
        renderAlertList(alertData);
      } else {
        const filteredAlerts = alertData.filter(alert => {
          switch(status) {
            case 'pending': return alert.status === '待处理';
            case 'processing': return alert.status === '处理中';
            case 'resolved': return alert.status === '已解决';
            case 'closed': return alert.status === '已关闭';
            default: return true;
          }
        });
        renderAlertList(filteredAlerts);
      }
    }

    // 初始化页面
    document.addEventListener('DOMContentLoaded', function() {
      // 渲染预警列表
      renderAlertList(alertData);
      
      // 关闭模态框事件
      document.getElementById('close-modal').addEventListener('click', closeAlertDetail);
      document.getElementById('modal-cancel').addEventListener('click', closeAlertDetail);
      
      // 提交处理事件
      document.getElementById('modal-submit').addEventListener('click', function() {
        const statusUpdate = document.getElementById('modal-status-update').value;
        const handleNote = document.getElementById('modal-handle-note').value;
        
        if (handleNote.trim() === '') {
          alert('请输入处理记录');
          return;
        }
        
        // 在实际应用中，这里应该发送AJAX请求更新服务器数据
        alert('处理记录已提交');
        closeAlertDetail();
      });
      
      // 推送设置模态框事件
      document.getElementById('notification-btn').addEventListener('click', openNotificationSettings);
      document.getElementById('close-notification-settings').addEventListener('click', closeNotificationSettings);
      document.getElementById('cancel-notification-settings').addEventListener('click', closeNotificationSettings);
      
      // 保存推送设置事件
      document.getElementById('save-notification-settings').addEventListener('click', function() {
        // 在实际应用中，这里应该发送AJAX请求保存设置
        alert('推送设置已保存');
        closeNotificationSettings();
      });
      
      // 预警状态过滤事件
      document.getElementById('alert-status-filter').addEventListener('change', function() {
        filterAlertList(this.value);
      });
      
      // 刷新预警列表事件
      document.getElementById('refresh-alerts').addEventListener('click', function() {
        // 模拟加载中效果
        this.innerHTML = '<i class="fa fa-spinner fa-spin mr-1"></i> 刷新中...';
        
        // 模拟数据加载延迟
        setTimeout(() => {
          renderAlertList(alertData);
          this.innerHTML = '<i class="fa fa-refresh mr-1"></i> 刷新';
          alert('预警列表已更新');
        }, 1000);
      });
      
      // AI详情查看事件
      document.getElementById('view-ai-details').addEventListener('click', function() {
        alert('AI预警优化详情功能正在开发中...');
      });
      
      // 退出登录事件
      document.getElementById('logout-button').addEventListener('click', function() {
        if (confirm('确定要退出登录吗？')) {
          window.location.href = 'index.html';
        }
      });
      
      // 添加点击效果
      document.getElementById('logout-button').addEventListener('mousedown', function() {
        this.classList.add('scale-95');
      });
      
      document.getElementById('logout-button').addEventListener('mouseup', function() {
        this.classList.remove('scale-95');
      });
    });
  </script>
</body>
</html>